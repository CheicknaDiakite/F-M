{% extends 'base.html' %}
{% load static %}
{% block content %}





  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->


    <!-- Right navbar links -->

  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar main-sidebar-custom sidebar-dark-primary elevation-4">
   
    <!-- Sidebar -->
    <div class="sidebar">
      <nav class="mt-2">
        <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
          <!-- Add icons to the links using the .nav-icon class
               with font-awesome or any other icon font library -->


          <li class="nav-header">Menu</li>
          <li class="nav-item">

            <a href="{% url 'administration' %}" class="nav-link">
              <i class="nav-icon fa fa-history"></i>
              <p>
                En attente
                <span class="badge badge-info right">{{nombre_candidat_entente}}</span>
              </p>
            </a>

            <a href="{% url 'administration' 'preselectionner' %}" class="nav-link">
              <i class="nav-icon fa fa-check"></i>
              <p>
                Présélectionnés
                <span class="badge badge-info right">{{nombre_preselectionner}}</span>
              </p>
            </a>

            <a href="{% url 'administration' 'rejeter' %}" class="nav-link">
              <i class="nav-icon fa fa-times-circle"></i>
              <p>
                Rejeter
                <span class="badge badge-info right">{{nombre_rejeter}}</span>
              </p>
            </a>

          </li>

          <li class="nav-header">Gestion</li>
          <li class="nav-item">
            <a href="{% url 'administration' 'categorie' %}" class="nav-link {% if page == 'categorie' %}active{% endif %}">
              <i class="nav-icon fa fa-folder-open"></i>
              <p>Catégories</p>
            </a>
            <a href="{% url 'administration' 'souscategorie' %}" class="nav-link {% if page == 'souscategorie' %}active{% endif %}">
              <i class="nav-icon fa fa-sitemap"></i>
              <p>Sous-catégories</p>
            </a>
            <a href="{% url 'administration' 'offre' %}" class="nav-link {% if page == 'offre' %}active{% endif %}">
              <i class="nav-icon fa fa-briefcase"></i>
              <p>Offres</p>
            </a>
            <a href="{% url 'administration' 'offrediplome' %}" class="nav-link {% if page == 'offrediplome' %}active{% endif %}">
              <i class="nav-icon fa fa-graduation-cap"></i>
              <p>Offres Diplômes</p>
            </a>
          </li>


        </ul>
      </nav>
      <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->

    <div class="sidebar-custom">
      <a href="#" class="btn btn-link"><i class="fas fa-cogs"></i></a>
      <a href="{% url 'deconnection' %}" class="btn btn-secondary hide-on-collapse pos-right">Déconnexion</a>
    </div>
    <!-- /.sidebar-custom -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->



    <!-- Main content -->
    <section class="content">

      <div class="container-fluid">

          {% if page != 'categorie' and page != 'souscategorie' and page != 'offre' and page != 'offrediplome' %}
           <h2 class="text-center display-4">Liste des candidats ({{nombre_candidat}})</h2>
            <form action="" method="post"> {% csrf_token %}
                <div class="row">

                    <div class="col-md-3 form-group">
                        <label for="diplome">Diplome ({{diplome}})</label>
                        <select name="diplome" id="diplome" class="form-control" >
                            <option value="tous">Tous</option>
                            <option value="BAC + 3">BAC + 3</option>
                            <option value="BAC + 4">BAC + 4</option>
                            <option value="BAC + 5">BAC + 5 ou plus</option>

                        </select>
                    </div>


                    <div class="col-md-3 form-group">
                        <label for="experience">Expérience ({{experience}})</label>
                        <select name="experience" id="experience" class="form-control" >
                            <option value="tous">Tous</option>
                            <option value="3 ans">3 ans</option>
                            <option value="4 ans">4 ans</option>
                            <option value="5 ans">5 ans ou plus</option>

                        </select>
                    </div>


                    <div class="col-md-3 form-group">
                        <label for="genre">Genre ({{genre}})</label>
                        <select name="genre" id="genre" class="form-control" >
                            <option value="tous">Tous</option>
                            <option value="Femme">Femme</option>
                            <option value="Homme">Homme</option>
                        </select>
                    </div>

                    <div class="col-md-3 form-group">
                        <label for="diplome">Filtre</label>
                        <input  type="submit" name="filter"  class="bg-primary text-white form-control" value="Filtrer">
                    </div>


                </div>
            </form>

        <div class="row">
          <div class="col-12">

            <div class="card">

              <div class="card-header">
                <h3 class="card-title">Liste des candidat</h3>
              </div>
              <!-- /.card-header -->
                <form action="" method="post" > {% csrf_token %}
              <div class="card-body">
                <table id="example1" class="table table-bordered table-striped">
                  <thead>
                  <tr>
                      <th>select</th>
                    <th>Prénom / nom</th>
                    <th>Diplômes</th>
                    <th>Expérience</th>
                    <th>Genre</th>
                    <th style="width:20px">Contacter</th>
                  </tr>
                  </thead>
                  <tbody>

                  {% for candidat in all_candidat %}
                      <tr>
                        <td style="width:20px"><input type="checkbox" name="liste_select" value="{{candidat.id}}" id=""></td>
                        <td><a href="{% url 'detaille_candidat' candidat.id %}" target="_blank" class="">{{candidat.prenom}} {{candidat.nom}} <i class="fa fa-eye"></i></a></td>
                        <td> {{candidat.diplome}} </td>
                        <td>{{candidat.experience}}</td>
                        <td>{{candidat.genre}}</td>
                        <td>{% if candidat.contacter %} <i class="fa fa-check text-success"></i> {% else %} <i class="fa fa-times text-danger"></i> {% endif %}</td>
                      </tr>

                  {% empty %}
                    <div class="h3 text-center">Pas de candidat ici</div>
                  {% endfor %}


                  </tbody>
                  <tfoot>
                  <tr>
                    <th>select</th>
                    <th >Prénom / nom</th>
                    <th>Diplômes</th>
                    <th>Expérience</th>
                    <th>Genre</th>
                    <th>Contacter</th>
                  </tr>
                  </tfoot>
                </table>
              </div>

                   <div class="container row text-center my-4">
                       <div class="col-md-2"></div>

                       <div class=" col-md-2 form-group">
                           <input type="submit" name="contacter" class="form-control bg-primary text-white" value="Contacter">
                       </div>

                       <div class=" col-md-2 form-group">
                           <input {% if page == 'preselectionner' %} disabled {% endif %} type="submit" name="preselectionner" class="form-control {% if page != 'preselectionner' %} bg-success text-white {% endif %} " value="Preselectionner">
                       </div>

                       <div class=" col-md-2 form-group">
                           <input {% if page == 'tous' %} disabled {% endif %} type="submit"   name="entente" class="form-control {% if page != 'tous' %}   bg-secondary text-white {% endif %}" value="En attente">
                       </div>

                       <div class=" col-md-2 form-group">
                           <input {% if page == 'rejeter' %} disabled {% endif %} type="submit" name="rejeter" class="form-control {% if page != 'rejeter' %}   bg-danger text-white {% endif %}" value="Rejeter">
                       </div>
                   </div> 
                </form>
              <!-- /.card-body -->
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
          {% endif %}

          {% if page == 'categorie' %}
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Gestion des Catégories</h3>
              </div>
              <div class="card-body">
                <div class="p-3">
                  <button class="btn btn-success" data-toggle="modal" data-target="#addCategorieModal">Ajouter Catégorie</button>
                  <table class="table mt-3">
                    <thead><tr><th>ID</th><th>Libelle</th><th>Actions</th></tr></thead>
                    <tbody>
                      {% for cat in categories %}
                        <tr>
                          <td>{{ cat.id }}</td>
                          <td>{{ cat.libelle }}</td>
                          <td>
                            <button class="btn btn-sm btn-primary btn-edit-categorie" data-id="{{ cat.id }}" data-libelle="{{ cat.libelle }}" data-toggle="modal" data-target="#editCategorieModal">Modifier</button>
                            <button class="btn btn-sm btn-danger btn-delete-categorie" data-id="{{ cat.id }}" data-toggle="modal" data-target="#deleteCategorieModal">Supprimer</button>
                          </td>
                        </tr>
                      {% empty %}
                        <tr><td colspan="3">Aucune catégorie</td></tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
          {% endif %}

          {% if page == 'souscategorie' %}
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Gestion des Sous-catégories</h3>
              </div>
              <div class="card-body">
                <div class="p-3">
                  <button class="btn btn-success" data-toggle="modal" data-target="#addSousCategorieModal">Ajouter Sous-catégorie</button>
                  <table class="table mt-3">
                    <thead><tr><th>ID</th><th>Catégorie</th><th>Libelle</th><th>Actions</th></tr></thead>
                    <tbody>
                      {% for sous in souscategories %}
                        <tr>
                          <td>{{ sous.id }}</td>
                          <td>{{ sous.categorie.libelle }}</td>
                          <td>{{ sous.libelle }}</td>
                          <td>
                            <button class="btn btn-sm btn-primary btn-edit-souscategorie" data-id="{{ sous.id }}" data-categorie="{{ sous.categorie.id }}" data-libelle="{{ sous.libelle }}" data-toggle="modal" data-target="#editSousCategorieModal">Modifier</button>
                            <button class="btn btn-sm btn-danger btn-delete-souscategorie" data-id="{{ sous.id }}" data-toggle="modal" data-target="#deleteSousCategorieModal">Supprimer</button>
                          </td>
                        </tr>
                      {% empty %}
                        <tr><td colspan="4">Aucune sous-catégorie</td></tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
          {% endif %}

          {% if page == 'offre' %}
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Gestion des Offres</h3>
              </div>
              <div class="card-body">
                <div class="p-3">
                  <button class="btn btn-success" data-toggle="modal" data-target="#addOffreModal">Ajouter Offre</button>
                  <table class="table mt-3">
                    <thead><tr><th>ID</th><th>Sous-catégorie</th><th>Libelle</th><th>Actions</th></tr></thead>
                    <tbody>
                      {% for off in offres %}
                        <tr>
                          <td>{{ off.id }}</td>
                          <td>{{ off.categorie.libelle }}</td>
                          <td>{{ off.libelle }}</td>
                          <td>
                            <button class="btn btn-sm btn-primary btn-edit-offre" data-id="{{ off.id }}" data-categorie="{{ off.categorie.id }}" data-libelle="{{ off.libelle }}" data-toggle="modal" data-target="#editOffreModal">Modifier</button>
                            <button class="btn btn-sm btn-danger btn-delete-offre" data-id="{{ off.id }}" data-toggle="modal" data-target="#deleteOffreModal">Supprimer</button>
                          </td>
                        </tr>
                      {% empty %}
                        <tr><td colspan="4">Aucune offre</td></tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
          {% endif %}

          {% if page == 'offrediplome' %}
        <div class="row">
          <div class="col-12">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Gestion des Offres Diplômes</h3>
              </div>
              <div class="card-body">
                <div class="p-3">
                  <button class="btn btn-success" data-toggle="modal" data-target="#addOffreDiplomeModal">Ajouter Offre Diplôme</button>
                  <table class="table mt-3">
                    <thead><tr><th>ID</th><th>Diplome</th><th>Offre</th><th>Libelle</th><th>Actions</th></tr></thead>
                    <tbody>
                      {% for od in offres_diplome %}
                        <tr>
                          <td>{{ od.id }}</td>
                          <td>{{ od.diplome.libelle }}</td>
                          <td>{{ od.offre.libelle }}</td>
                          <td>{{ od.libelle }}</td>
                          <td>
                            <button class="btn btn-sm btn-primary btn-edit-offrediplome" data-id="{{ od.id }}" data-diplome="{{ od.diplome.id }}" data-offre="{{ od.offre.id }}" data-libelle="{{ od.libelle }}" data-toggle="modal" data-target="#editOffreDiplomeModal">Modifier</button>
                            <button class="btn btn-sm btn-danger btn-delete-offrediplome" data-id="{{ od.id }}" data-toggle="modal" data-target="#deleteOffreDiplomeModal">Supprimer</button>
                          </td>
                        </tr>
                      {% empty %}
                        <tr><td colspan="5">Aucune offre diplôme</td></tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- /.card -->
          </div>
          <!-- /.col -->
        </div>
        <!-- /.row -->
          {% endif %}
      </div>
      <!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <footer class="main-footer">
    <div class="float-right d-none d-sm-block">
      <b>Version</b> 3.2.0
    </div>
    <strong>Copyright &copy; 2023 <a href="https://adminlte.io">CAFE-SARL</a>.</strong>
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>





{% include 'formulaire/administration_gestion_modals.html' %}

{% endblock %}